# Set 256 color scheme
set -g default-terminal "xterm-256color"

# Set Prefix to Ctrl-Space
set-option -g prefix C-space


# Source with Prefix + R
bind R source "$XDG_CONFIG_HOME/tmux/tmux.conf" \; display "tmux.conf sourced!"

# New window with prompt
bind-key C command-prompt -p "Name of new window: " "new-window -n '%%'"

# hjkl pane traversal
bind h select-pane -L
bind j select-pane -D
bind k select-pane -U
bind l select-pane -R

# Other keybinds
bind r command-prompt "rename-window %%"


# Vim like copypaste mode
bind-key -Tcopy-mode-vi 'C-v' send -X begin-selection
bind-key -Tcopy-mode-vi 'C-y' send -X copy-selection

# Play nicer with Neovim
set-option -sg escape-time 10
set-option -g focus-events on

# Install TPM if needed 
# if-shell 'test ! -d "$XDG_CONFIG_HOME/tmux/plugins/tpm"' \
#   'run-shell "git clone https://github.com/tmux-plugins/tpm $XDG_CONFIG_HOME/tmux/plugins/tpm && $XDG_CONFIG_HOME/tmux/plugins/tpm/bin/install_plugins > /dev/null"'

# Plugins
set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'tmux-plugins/tmux-sensible'
set -g @plugin 'tmux-plugins/tmux-yank'
set -g @plugin 'tmux-plugins/tmux-resurrect'
 
# Themes
# set -g @plugin 'catppuccin/tmux'
source-file "$XDG_CONFIG_HOME/tmux/themes/tokyonight_night.conf"

# My preferences
set -g base-index 1 # Set first window's index to start at 1
set -g set-clipboard on # use system clipboard
set -g renumber-windows on # renumber all windows when one is closes
set -g status-position top # macOS style
setw -g mode-keys vi # use Prefix + { or [ to enter vim scroll mode
set -g pane-active-border-style 'fg=magenta, bg=default'
set -g pane-border-style 'fg=brightblack, bg=default'

# Run TPM at bottom
run "$XDG_CONFIG_HOME/tmux/plugins/tpm/tpm"

